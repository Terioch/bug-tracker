@model BugTracker.Models.RoleViewModel;

<style>
    a {
        cursor: pointer;
    }

    .role-card {
        max-width: 800px;
    }
</style>

@{
    ViewBag.RowBreak = 0;
}

<div class="card mb-3 role-card" style="min-height: 366px" data-id="@Model.Id" data-index="@Model.Index">
   @* <div class="card-header">
        Role id: @Model.Id
    </div>*@
    <div class="card-body">      
        <input class="card-title fs-3 p-2 rounded border border-0 font-weight-bold role-name-input" disabled asp-for="@Model.Name" />
                
        <ul class="list-group error-list"></ul>
        <hr style="background-color: #d1d1d1" />        

        <div class="role-users-container"> 
            <div class="d-flex flex-wrap align-items-end mb-3">
                <p class="fs-5 me-3 mb-0 pb-0 fw-bold text-decoration-underline">Users in this role</p>
                <a class="edit-user-list edit-user-list-onload mb-0 pb-0 text-decoration-none" data-bs-toggle="modal" data-bs-target="#userDropdownModal">Add/Remove User</a>                
            </div>
            <div class="role-user-list-container">                
                <div class="role-user-list">
                    
                    @if (!Model.Users.Any())
                    {
                        <ul>
                            <li class="list-group-item border-0">No users are associated with this role</li>
                        </ul>
                    }
                    else
                    {   
                        <ul class="list-group list-group-horizontal w-80 d-flex flex-wrap">     
                            @foreach (var user in Model.Users)
                            {
                                <li class="list-group-item border-0" style="min-width: max-content">@user</li>   
                            }
                        </ul>

                        @*@for (int i = 0; i < 6; i++) 
                        {
                            @if (ViewBag.RowBreak >= Model.Users.Count)
                            {
                                break;
                            }

                            ViewBag.RowBreak += 3;

                            <ul class="list-group list-group-horizontal w-80">                                
                                @for (int j = ViewBag.RowBreak - 3; j < ViewBag.RowBreak; j++)
                                {     
                                    @if (j >= Model.Users.Count)
                                    {
                                        break;
                                    }

                                    <li class="list-group-item border-0">@Model.Users[j]</li>   
                                }                               
                            </ul>
                        } *@                       
                    }   
                   
                </div>                
            </div>                   
            <!-- User Pagination -->
            <nav id="userPagination" class="align-self-end" aria-label="collection of roles">                    
                <ul class="pagination mb-1">
                    <li class="page-item page-item-previous"><a class="page-link">Previous</a></li>
                    <li class="page-item page-item-one"><a class="page-link">1</a></li>
                    <li class="page-item page-item-two"><a class="page-link">2</a></li>     
                    <li class="page-item page-item-two"><a class="page-link">3</a></li>     
                    <li class="page-item page-item-next"><a class="page-link">Next</a></li>
                </ul>                    
            </nav>
        </div>                    

    </div>
    <div class="card-footer">
        <div class="my-2">
            <btn class="btn btn-primary text-white edit-role">Edit Role</btn>
            <btn class="btn btn-danger delete-role">Delete Role</btn>       
        </div>                
    </div>    
</div>
